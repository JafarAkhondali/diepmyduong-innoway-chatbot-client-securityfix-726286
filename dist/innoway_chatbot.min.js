!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("innoway_chatbot",[],n):"object"==typeof exports?exports.innoway_chatbot=n():t.innoway_chatbot=n()}(this,function(){return function(t){function n(e){if(o[e])return o[e].exports;var i=o[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var o={};return n.m=t,n.c=o,n.p="",n(0)}([function(t,n,o){t.exports=o(5)},function(t,n,o){"use strict";var e=o(2),i=function(){function t(){}return t.apiUrl=function(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var i=e.DefaultConfig.host;return o&&Object.keys(o).map(function(n){t=t.replace(new RegExp("{{"+n+"}}","g"),o[n])}),n&&(t+="?",Object.keys(n).map(function(o){t+=o+"="+n[o]+"&"}),t=t.slice(0,-1)),i+t},t}();n.URL=i},function(t,n){"use strict";n.DefaultConfig={host:"https://jerry-chatbot.herokuapp.com/",facebook:{app_id:"143366482876596"}}},function(t,n,o){"use strict";var e=o(1),i=o(6),a=function(){function t(t){this._token=t}return t.prototype.getSettings=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/settings"),method:"GET",headers:{access_token:n._token}};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.prototype.activeSetting=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/settings/active"),method:"POST",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify(n)};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.SETTING_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.deActiveSetting=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/settings/deactive"),method:"POST",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify({types:n})};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.SETTING_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.getStories=function(t){void 0===t&&(t=function(){});var n={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories"),method:"GET",headers:{access_token:this._token,"content-type":"application/json"},processData:!1};$.ajax(n).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.prototype.buildStory=function(t){return new i.Story(this,t)},t.prototype.getStory=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}",null,{story_id:t}),method:"GET",headers:{access_token:o._token,"content-type":"application/json"}};$.ajax(i).done(function(t){null!=t?n(null,o.buildStory(t)):n("Not found",null)}).fail(function(t,o,e){n(o,e)})},t.prototype.newStory=function(n,o){void 0===n&&(n="My Story"),void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories"),method:"POST",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify({title:n})};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.STORY_CHANGE,n),o(null,i.buildStory(n))}).fail(function(t,n,e){o(n,e)})},t.prototype.removeStory=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}",null,{story_id:n}),method:"DELETE",headers:{access_token:i._token,"content-type":"application/json"}};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.SETTING_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.getStartedStory=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/settings/getStartedStory"),method:"GET",headers:{access_token:n._token}};$.ajax(o).done(function(o){null!=o&&(o=n.buildStory(o)),t(null,o)}).fail(function(n,o,e){t(o,e)})},t.prototype.getSubscribers=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/subscribers"),method:"GET",headers:{access_token:n._token,"content-type":"application/json"}};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.prototype.getSubscriber=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/subscribers/{{sub_id}}",null,{sub_id:t}),method:"GET",headers:{access_token:o._token,"content-type":"application/json"}};$.ajax(i).done(function(t){n(null,t)}).fail(function(t,o,e){n(o,e)})},t.prototype.editSubscriber=function(t,n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/subscribers/{{sub_id}}",null,{sub_id:t}),method:"PUT",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify(n)};$.ajax(a).done(function(t){o(null,t)}).fail(function(t,n,e){o(n,e)})},t.prototype.removeSubscriber=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/subscribers/{{sub_id}}",null,{sub_id:t}),method:"DELETE",headers:{access_token:o._token,"content-type":"application/json"}};$.ajax(i).done(function(t){n(null,t)}).fail(function(t,o,e){n(o,e)})},t.prototype.sendToSubscribers=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/send/toSubscriber"),method:"POST",headers:{access_token:o._token,"content-type":"application/json"},processData:!1,data:JSON.stringify(t)};$.ajax(i).done(function(t){n(null,t)}).fail(function(t,o,e){n(o,e)})},t.prototype.sendToAllSubscribers=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/send/toAll"),method:"POST",headers:{access_token:o._token,"content-type":"application/json"},processData:!1,data:JSON.stringify(t)};$.ajax(i).done(function(t){n(null,t)}).fail(function(t,o,e){n(o,e)})},t.SettingTypes={GREETING:"greeting",PRESISTENT_MENU:"persistent_menu",GET_STARTED:"get_started"},t.EventTypes={SETTING_CHANGE:"innoway_chatbot.page.setting_change",STORY_CHANGE:"innoway_chatbot.page.story_change"},t}();n.Page=a},function(t,n,o){"use strict";var e=o(2);n.FBConfig=function(t){void 0===t&&(t=function(){}),$(document).ready(function(){var n=document,o="script",i="facebook-jssdk";window.fbAsyncInit=function(){console.log("INIT FACEBOOK SDK"),FB.init({appId:e.DefaultConfig.facebook.app_id,xfbml:!0,version:"v2.9",cookie:!0,status:!0}),FB.AppEvents.logPageView(),t()};var a;n.getElementsByTagName(o)[0],n.getElementById(i)||(a=n.createElement(o),a.id=i,a.async=!0,a.src="//connect.facebook.net/en_US/sdk.js",n.getElementsByTagName("head")[0].appendChild(a),console.log("ADD FACEBOOK SDK"))})}},function(t,n,o){"use strict";var e=o(7),i=o(3);t.exports={User:e.User,Page:i.Page}},function(t,n,o){"use strict";var e=o(1),i=o(3),a=function(){function t(t,n){this._page=t,this._token=t._token,this._story=n}return t.prototype.getCards=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/cards",null,{story_id:n._story._id}),method:"GET",headers:{access_token:n._token,"content-type":"application/json"},processData:!1};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.prototype.addCard=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/cards",null,{story_id:i._story._id}),method:"POST",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify(n)};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.CARDS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.removeCard=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/cards/{{card_id}}",null,{story_id:i._story._id,card_id:n}),method:"DELETE",headers:{access_token:i._token,"content-type":"application/json"}};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.CARDS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.updateCard=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/cards/{{card_id}}",null,{story_id:i._story._id,card_id:n._id}),method:"PUT",headers:{access_token:i._token,"content-type":"application/json"},data:JSON.stringify(n)};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.CARDS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.getKeys=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/keys",null,{story_id:n._story._id}),method:"GET",headers:{access_token:n._token,"content-type":"application/json"},processData:!1};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.prototype.addKey=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/keys",null,{story_id:i._story._id}),method:"POST",headers:{access_token:i._token,"content-type":"application/json"},processData:!1,data:JSON.stringify({key:n})};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.KEYS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.removeKey=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/keys/{{key_id}}",null,{story_id:i._story._id,key_id:n}),method:"DELETE",headers:{access_token:i._token,"content-type":"application/json"}};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.KEYS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.updateKey=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/keys/{{key_id}}",null,{story_id:i._story._id,key_id:n._id}),method:"PUT",headers:{access_token:i._token,"content-type":"application/json"},data:JSON.stringify(n)};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.KEYS_CHANGE,n),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.destroy=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}",null,{story_id:n._story._id}),method:"DELETE",headers:{access_token:n._token,"content-type":"application/json"}};$.ajax(o).done(function(o){$(n._page).trigger(i.Page.EventTypes.STORY_CHANGE,o),t(null,o)}).fail(function(n,o,e){t(o,e)})},t.prototype.update=function(t,n){void 0===n&&(n=function(){});var o=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}",null,{story_id:o._story._id}),method:"PUT",headers:{access_token:o._token,"content-type":"application/json"},data:JSON.stringify({title:t})};$.ajax(a).done(function(t){$(o._page).trigger(i.Page.EventTypes.STORY_CHANGE,t),n(null,t)}).fail(function(t,o,e){n(o,e)})},t.prototype.setAsGetStarted=function(t){void 0===t&&(t=function(){});var n=this,o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/page/stories/{{story_id}}/setStarted",null,{story_id:n._story._id}),method:"POST",headers:{access_token:n._token,"content-type":"application/json"}};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})},t.EventTypes={CARDS_CHANGE:"innoway_chatbot.story.card_change",KEYS_CHANGE:"innoway_chatbot.story.key_change"},t}();n.Story=a},function(t,n,o){"use strict";var e=o(1),i=o(4),a=function(){function t(n){void 0===n&&(n=null),this.authenticated=!1;var o=this;console.log("Init User Object"),i.FBConfig(function(){console.log("FACEBOOK LOADED"),FB.getLoginStatus(function(n){console.log("LOGIN STATUS ",n),"connected"===n.status?(o._token=n.authResponse.accessToken,o.authenticated=!0,$(o).trigger(t.EventTypes.AUTHENTICATE_STATECHANGE,o.authenticated)):console.log("not connected")})})}return t.prototype.isAuthenticated=function(t){return void 0===t&&(t=function(){}),this.authenticated||t("PERMISSION ERROR","You don't have permission to access"),this.authenticated},t.prototype.loginWithFacebook=function(n){void 0===n&&(n=function(){});var o=this;FB.login(function(e){e.authResponse?(o._token=e.authResponse.accessToken,o.authenticated=!0,n(null,e.authResponse)):(o._token=null,o.authenticated=!1,n("User cancelled login or did not fully authorize.",null)),$(o).trigger(t.EventTypes.AUTHENTICATE_STATECHANGE,o.authenticated)},{scope:"business_management,email,manage_pages,pages_messaging,public_profile,publish_pages,user_friends"})},t.prototype.logout=function(){FB.logout(),this._token=null,this.user=null,this.authenticated=!1,$(this).trigger(t.EventTypes.AUTHENTICATE_STATECHANGE,this.authenticated)},t.prototype.getPages=function(t){void 0===t&&(t=function(){});var n=this;if(n.isAuthenticated(t)){var o={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/me/pages"),method:"GET",headers:{access_token:this._token}};$.ajax(o).done(function(n){t(null,n)}).fail(function(n,o,e){t(o,e)})}},t.prototype.subscribePage=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/me/pages/subscribe",{page_token:n}),method:"POST",headers:{access_token:this._token}};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.PAGE_STATECHANGE,!0),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.unSubscribePage=function(n,o){void 0===o&&(o=function(){});var i=this,a={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/me/pages/subscribe",{page_token:n}),method:"DELETE",headers:{access_token:this._token}};$.ajax(a).done(function(n){$(i).trigger(t.EventTypes.PAGE_STATECHANGE,!1),o(null,n)}).fail(function(t,n,e){o(n,e)})},t.prototype.getInfo=function(t,n,o){void 0===t&&(t=function(){}),void 0===n&&(n="email,id,birthday,name"),void 0===o&&(o="large");var e=this;e.isAuthenticated(t)&&FB.api("/me","GET",{fields:n,type:o},function(n){t(null,n)})},t.prototype.getPageInfo=function(t,n){void 0===n&&(n=function(){});var o=this,i={async:!0,crossDomain:!0,url:e.URL.apiUrl("api/me/pages/info",{page_token:t}),method:"GET",headers:{access_token:o._token}};$.ajax(i).done(function(t){n(null,t)}).fail(function(t,o,e){n(o,e)})},t.prototype.getPageInfoWithId=function(t,n,o){void 0===n&&(n=function(){}),void 0===o&&(o="access_token,picture,name,is_webhooks_subscribed"),FB.api("/"+t,"GET",{fields:o},function(t){n(null,t)})},t.cards=[],t.EventTypes={AUTHENTICATE_STATECHANGE:"innoway_chatbot.user.authenticate",PAGE_STATECHANGE:"innoway_chatbot.user.page_state"},t}();n.User=a}])});
//# sourceMappingURL=innoway_chatbot.min.js.map