{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///innoway.min.js","webpack:///webpack/bootstrap 28b5e5d9838bc93d334f","webpack:///./src/configs/server.config.ts","webpack:///./src/configs/customer.config.ts","webpack:///./src/constants/customer.const.ts","webpack:///./src/customer.ts"],"names":["root","factory","exports","module","define","amd","innoway","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","ServerConfig","host","filesPath","apiPath","APIPath","server_config_1","CustomerConfig","authTokenStorage","loginUrl","signUpUrl","updateCustomerUrl","getBillsUrl","getBillUrl","getAllProductsUrl","sendBillUrl","addFeedbackUrl","getPromotionsUrl","getCustomerUrl","getBlogsUrl","CustomerEvents","AuthStateChange","CustomerEdited","customer_config_1","customer_const_1","Customer","token","authenticated","localStorage","getItem","loginWithToken","prototype","requiedAuthenticate","callback","login","phone","password","_this","$","ajax","type","url","dataType","data","Phone","Password","done","res","StatusCode","user","Data","_token","Token","trigger","setItem","StatusMessage","fail","request","err","status","console","log","headers","loginWithGoolge","loginWithFacebook","signUp","update","getBills","getAllProducts","crossDomain","forEach","product","Thumbnail","events"],"mappings":"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","file":"innoway.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"innoway\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"innoway\"] = factory();\n\telse\n\t\troot[\"innoway\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"innoway\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"innoway\"] = factory();\n\telse\n\t\troot[\"innoway\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(4);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\texports.ServerConfig = {\n\t    host: 'http://phincafe.vn',\n\t    filesPath: '/uploads/',\n\t    apiPath: '/apis/v1/'\n\t};\n\texports.APIPath = exports.ServerConfig.host + exports.ServerConfig.apiPath;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar server_config_1 = __webpack_require__(1);\n\texports.CustomerConfig = {\n\t    authTokenStorage: 'innoway.Customer.auth.token',\n\t    loginUrl: server_config_1.APIPath + 'CustomerLogin',\n\t    signUpUrl: server_config_1.APIPath + 'Register',\n\t    updateCustomerUrl: server_config_1.APIPath + 'EditCustomer',\n\t    getBillsUrl: server_config_1.APIPath + 'GetListBillFromCustomer',\n\t    getBillUrl: server_config_1.APIPath + 'GetBill',\n\t    getAllProductsUrl: server_config_1.APIPath + 'GetAllProduct',\n\t    sendBillUrl: server_config_1.APIPath + 'SendBill',\n\t    addFeedbackUrl: server_config_1.APIPath + 'AddFeedback',\n\t    getPromotionsUrl: server_config_1.APIPath + 'Promotions',\n\t    getCustomerUrl: server_config_1.APIPath + 'GetCustomer',\n\t    getBlogsUrl: server_config_1.ServerConfig.host + '/blog/wp-json/posts',\n\t};\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\texports.CustomerEvents = {\n\t    AuthStateChange: 'AuthStateChange',\n\t    CustomerEdited: 'CustomerEdited',\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar customer_config_1 = __webpack_require__(2);\n\tvar server_config_1 = __webpack_require__(1);\n\tvar customer_const_1 = __webpack_require__(3);\n\tvar Customer = (function () {\n\t    function Customer(token) {\n\t        if (token === void 0) { token = null; }\n\t        this.authenticated = false;\n\t        if (token == null) {\n\t            token = localStorage.getItem(customer_config_1.CustomerConfig.authTokenStorage);\n\t        }\n\t        if (token != null) {\n\t            this.loginWithToken(token);\n\t        }\n\t    }\n\t    Customer.prototype.requiedAuthenticate = function (callback) {\n\t        if (callback === void 0) { callback = function () { }; }\n\t        if (!this.authenticated) {\n\t            callback('PERMISSION ERROR', \"You don't have permission to access\");\n\t        }\n\t        return this.authenticated;\n\t    };\n\t    //====== Auth\n\t    //LOGIN\n\t    Customer.prototype.login = function (phone, password, callback) {\n\t        var _this = this;\n\t        if (callback === void 0) { callback = function () { }; }\n\t        $.ajax({\n\t            type: 'POST',\n\t            url: customer_config_1.CustomerConfig.loginUrl,\n\t            dataType: 'json',\n\t            data: {\n\t                Phone: phone,\n\t                Password: password\n\t            }\n\t        })\n\t            .done(function (res) {\n\t            if (res.StatusCode === 200) {\n\t                _this.user = res.Data;\n\t                _this._token = res.Data.Token;\n\t                _this.authenticated = true;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                localStorage.setItem(customer_config_1.CustomerConfig.authTokenStorage, res.Data.Token);\n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                _this.authenticated = false;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            _this.authenticated = false;\n\t            $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t            callback(err, status);\n\t        });\n\t    };\n\t    //GET CUSTOMER\n\t    Customer.prototype.loginWithToken = function (token, callback) {\n\t        var _this = this;\n\t        if (callback === void 0) { callback = function () { }; }\n\t        console.log('TOKEN', token);\n\t        $.ajax({\n\t            type: 'POST',\n\t            url: customer_config_1.CustomerConfig.getCustomerUrl,\n\t            dataType: 'json',\n\t            headers: {\n\t                'token': token\n\t            }\n\t        })\n\t            .done(function (res) {\n\t            console.log(res);\n\t            if (res.StatusCode === 200) {\n\t                _this.user = res.Data;\n\t                _this._token = res.Data.Token;\n\t                _this.authenticated = true;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                localStorage.setItem(customer_config_1.CustomerConfig.authTokenStorage, res.Data.Token);\n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                _this.authenticated = false;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            console.log('FAIL', request);\n\t            _this.authenticated = false;\n\t            $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t            callback(err, status);\n\t        });\n\t    };\n\t    //LOGIN WITH GOOGLE\n\t    Customer.prototype.loginWithGoolge = function () {\n\t    };\n\t    //LOGIN WITH FACEBOOK\n\t    Customer.prototype.loginWithFacebook = function () {\n\t    };\n\t    //SIGNUP\n\t    Customer.prototype.signUp = function (data, callback) {\n\t        var _this = this;\n\t        if (callback === void 0) { callback = function () { }; }\n\t        $.ajax({\n\t            type: 'POST',\n\t            url: customer_config_1.CustomerConfig.signUpUrl,\n\t            dataType: 'json',\n\t            data: data\n\t        })\n\t            .done(function (res) {\n\t            if (res.StatusCode === 200) {\n\t                _this.user = res.Data;\n\t                _this._token = res.Data.Token;\n\t                _this.authenticated = true;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                localStorage.setItem(customer_config_1.CustomerConfig.authTokenStorage, res.Data.Token);\n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                _this.authenticated = false;\n\t                $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            _this.authenticated = false;\n\t            $(_this).trigger(customer_const_1.CustomerEvents.AuthStateChange, _this.authenticated);\n\t            callback(err, status);\n\t        });\n\t    };\n\t    //Update Customer\n\t    Customer.prototype.update = function (token, data, callback) {\n\t        var _this = this;\n\t        if (callback === void 0) { callback = function () { }; }\n\t        $.ajax({\n\t            type: 'POST',\n\t            url: customer_config_1.CustomerConfig.updateCustomerUrl,\n\t            dataType: 'json',\n\t            data: data,\n\t            headers: {\n\t                'token': token\n\t            }\n\t        })\n\t            .done(function (res) {\n\t            if (res.StatusCode === 200) {\n\t                $(_this).trigger(customer_const_1.CustomerEvents.CustomerEdited, res.Data);\n\t                _this.user = res.Data;\n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            callback(err, status);\n\t        });\n\t    };\n\t    //====== BILLS\n\t    //GET LIST BILLS\n\t    Customer.prototype.getBills = function (callback) {\n\t        if (callback === void 0) { callback = function () { }; }\n\t        if (this.requiedAuthenticate(callback)) {\n\t            $.ajax({\n\t                type: 'POST',\n\t                url: customer_config_1.CustomerConfig.getBillsUrl,\n\t                dataType: 'json',\n\t                headers: {\n\t                    'token': this._token\n\t                }\n\t            })\n\t                .done(function (res) {\n\t                if (res.StatusCode === 200) {\n\t                    callback(null, res.Data);\n\t                }\n\t                else {\n\t                    callback(res.StatusCode, res.StatusMessage);\n\t                }\n\t            })\n\t                .fail(function (request, err, status) {\n\t                callback(err, status);\n\t            });\n\t        }\n\t    };\n\t    //=========== STATIC METHODS ==================\n\t    //====== PRODUCTS\n\t    //GET ALL PRODUCTS\n\t    Customer.getAllProducts = function (callback) {\n\t        $.ajax({\n\t            type: 'GET',\n\t            url: customer_config_1.CustomerConfig.getAllProductsUrl,\n\t            dataType: 'json',\n\t            crossDomain: true\n\t        })\n\t            .done(function (res) {\n\t            if (res.StatusCode === 200) {\n\t                res.Data.forEach(function (product) {\n\t                    product.Thumbnail = server_config_1.ServerConfig.host + server_config_1.ServerConfig.filesPath + product.Thumbnail;\n\t                });\n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            callback(err, status);\n\t        });\n\t    };\n\t    Customer.events = customer_const_1.CustomerEvents;\n\t    return Customer;\n\t}());\n\texports.Customer = Customer;\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// innoway.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28b5e5d9838bc93d334f","export const ServerConfig = {\n    host: 'http://phincafe.vn',\n    filesPath: '/uploads/',\n    apiPath: '/apis/v1/'\n}\n\nexport const APIPath = ServerConfig.host+ServerConfig.apiPath;\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/configs/server.config.ts","import { ServerConfig ,APIPath} from './server.config'\n\nexport const CustomerConfig = {\n    authTokenStorage    : 'innoway.Customer.auth.token',\n    loginUrl            : APIPath+'CustomerLogin',\n    signUpUrl           : APIPath+'Register',\n    updateCustomerUrl     : APIPath+'EditCustomer',\n    getBillsUrl         : APIPath+'GetListBillFromCustomer',\n    getBillUrl          : APIPath+'GetBill',\n    getAllProductsUrl   : APIPath+'GetAllProduct',\n    sendBillUrl         : APIPath+'SendBill',\n    addFeedbackUrl      : APIPath+'AddFeedback',\n    getPromotionsUrl    : APIPath+'Promotions',\n    getCustomerUrl      : APIPath+'GetCustomer',\n    getBlogsUrl         : ServerConfig.host+'/blog/wp-json/posts',\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/configs/customer.config.ts","\n\nexport const CustomerEvents = {\n    AuthStateChange : 'AuthStateChange',\n    CustomerEdited  : 'CustomerEdited',\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/constants/customer.const.ts","\nimport { CustomerConfig } from './configs/customer.config';\nimport { ServerConfig } from './configs/server.config';\nimport { CustomerEvents } from './constants/customer.const';\ndeclare var $:any;\n\n\nexport class Customer {\n\n    //Events\n    private _token:string;\n    public user:any;\n    public authenticated: boolean = false;\n    public static events = CustomerEvents;\n\n    constructor(token:string = null){\n        if(token == null){\n            token = localStorage.getItem(CustomerConfig.authTokenStorage);\n        }\n        if(token != null){\n            this.loginWithToken(token);\n        }\n    } \n    private requiedAuthenticate(callback:any = ()=>{}){\n        if(!this.authenticated){\n            callback('PERMISSION ERROR',\"You don't have permission to access\");\n        }\n        return this.authenticated\n    }\n    //====== Auth\n    //LOGIN\n    public login(phone:string,password:string,callback:any = ()=>{}){\n        $.ajax({\n            type: 'POST',\n            url: CustomerConfig.loginUrl,\n            dataType:'json',\n            data: {\n                Phone   : phone,\n                Password: password\n            }\n        })\n        .done((res:any) => {\n            if(res.StatusCode === 200){\n                this.user = res.Data;\n                this._token = res.Data.Token;\n                this.authenticated = true;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                localStorage.setItem(CustomerConfig.authTokenStorage,res.Data.Token);\n                callback(null,res.Data);\n            }else{\n                this.authenticated = false;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                callback(res.StatusCode,res.StatusMessage);\n            }\n            \n        })\n        .fail((request:any,err:any,status:any)=>{\n            this.authenticated = false;\n            $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n            callback(err,status);\n        });\n    }\n\n    //GET CUSTOMER\n    public loginWithToken(token:string,callback:any = ()=>{}){\n        console.log('TOKEN',token);\n        $.ajax({\n            type: 'POST',\n            url: CustomerConfig.getCustomerUrl,\n            dataType: 'json',\n            headers: {\n                'token': token\n            }\n        })\n        .done((res:any) => {\n            console.log(res);\n            if(res.StatusCode === 200){\n                this.user = res.Data;\n                this._token = res.Data.Token;\n                this.authenticated = true;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                localStorage.setItem(CustomerConfig.authTokenStorage,res.Data.Token);\n                callback(null,res.Data);\n            }else{\n                this.authenticated = false;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                callback(res.StatusCode,res.StatusMessage);\n            }\n        })\n        .fail((request:any,err:any,status:any)=>{\n            console.log('FAIL',request);\n            this.authenticated = false;\n            $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n            callback(err,status);\n        })\n    }\n\n    //LOGIN WITH GOOGLE\n    public loginWithGoolge(){\n\n    }\n\n    //LOGIN WITH FACEBOOK\n    public loginWithFacebook(){\n        \n    }\n\n    //SIGNUP\n    public signUp(data:any,callback:any = ()=>{}){\n        $.ajax({\n            type: 'POST',\n            url: CustomerConfig.signUpUrl,\n            dataType: 'json',\n            data: data\n        })\n        .done((res:any) => {\n            if(res.StatusCode === 200){\n                this.user = res.Data;\n                this._token = res.Data.Token;\n                this.authenticated = true;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                localStorage.setItem(CustomerConfig.authTokenStorage,res.Data.Token);\n                callback(null,res.Data);\n            }else{\n                this.authenticated = false;\n                $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n                callback(res.StatusCode,res.StatusMessage);\n            }\n        })\n        .fail((request:any,err:any,status:any)=>{\n            this.authenticated = false;\n            $(this).trigger(CustomerEvents.AuthStateChange,this.authenticated);\n            callback(err,status);\n        });\n    }\n\n    //Update Customer\n    public update(token:string,data:any,callback:any = ()=>{}){\n        $.ajax({\n            type: 'POST',\n            url: CustomerConfig.updateCustomerUrl,\n            dataType: 'json',\n            data: data,\n            headers: {\n                'token': token\n            }\n        })\n        .done((res:any) => {\n            if(res.StatusCode === 200){\n                $(this).trigger(CustomerEvents.CustomerEdited,res.Data);\n                this.user = res.Data;\n                callback(null,res.Data);\n            }else{\n                callback(res.StatusCode,res.StatusMessage);\n            }\n        })\n        .fail((request:any,err:any,status:any)=>{\n            callback(err,status);\n        });\n    }\n    //====== BILLS\n    //GET LIST BILLS\n    public getBills(callback:any = ()=>{}){\n        if(this.requiedAuthenticate(callback)){\n            $.ajax({\n                type: 'POST',\n                url: CustomerConfig.getBillsUrl,\n                dataType: 'json',\n                headers: {\n                    'token': this._token\n                }\n            })\n            .done((res:any) => {\n                if(res.StatusCode === 200){\n                    callback(null,res.Data);\n                }else{\n                    callback(res.StatusCode,res.StatusMessage);\n                }\n            })\n            .fail((request:any,err:any,status:any)=>{\n                callback(err,status);\n            });\n        } \n    }\n    //=========== STATIC METHODS ==================\n    //====== PRODUCTS\n    //GET ALL PRODUCTS\n    public static getAllProducts(callback:any){\n        $.ajax({\n            type: 'GET',\n            url: CustomerConfig.getAllProductsUrl,\n            dataType: 'json',\n            crossDomain: true\n        })\n        .done((res:any) => {\n            if(res.StatusCode === 200){\n                res.Data.forEach((product:any) => {\n                    product.Thumbnail = ServerConfig.host+ServerConfig.filesPath+product.Thumbnail;\n                });\n                callback(null,res.Data);\n            }else{\n                callback(res.StatusCode,res.StatusMessage);\n            }\n        })\n        .fail((request:any,err:any,status:any)=>{\n            callback(err,status);\n        });\n    }\n\n    \n\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/customer.ts"],"sourceRoot":""}