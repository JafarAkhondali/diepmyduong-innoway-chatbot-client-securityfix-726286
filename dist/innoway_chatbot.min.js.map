{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///innoway_chatbot.min.js","webpack:///webpack/bootstrap 9d63648cc1d78b1d5787","webpack:///./src/configs/default.config.ts","webpack:///./src/configs/api.config.ts","webpack:///./src/configs/fb.config.ts","webpack:///./src/index.ts","webpack:///./src/user.ts"],"names":["root","factory","exports","module","define","amd","innoway_chatbot","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","DefaultConfig","host","facebook","app_id","default_config_1","API","pages","getAllPages","subscribe","FBConfig","d","document","s","window","fbAsyncInit","FB","init","appId","xfbml","version","AppEvents","logPageView","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","user_1","fb_config_1","User","api_config_1","token","authenticated","prototype","requiedAuthenticate","callback","login","phone","password","_this","$","ajax","type","url","dataType","data","Phone","Password","done","res","StatusCode","user","Data","_token","Token","trigger","localStorage","setItem","StatusMessage","fail","request","err","status","loginWithFacebook","response","authResponse","console","log","logout","removeItem","getAllProducts","cards"],"mappings":"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","file":"innoway_chatbot.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"innoway_chatbot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"innoway_chatbot\"] = factory();\n\telse\n\t\troot[\"innoway_chatbot\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"innoway_chatbot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"innoway_chatbot\"] = factory();\n\telse\n\t\troot[\"innoway_chatbot\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(4);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\texports.DefaultConfig = {\n\t    host: \"https://jerry-chatbot.herokuapp.com/\",\n\t    facebook: {\n\t        app_id: \"143366482876596\" //Innoway\n\t    }\n\t};\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar default_config_1 = __webpack_require__(1);\n\texports.API = {\n\t    pages: {\n\t        getAllPages: default_config_1.DefaultConfig.host + \"api/me/pages\",\n\t        subscribe: default_config_1.DefaultConfig.host + \"api/me/pages/subscribe\",\n\t    }\n\t};\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar default_config_1 = __webpack_require__(1);\n\t//Facebook Config\n\texports.FBConfig = function () {\n\t    var d = document;\n\t    var s = 'script';\n\t    var id = 'facebook-jssdk';\n\t    window.fbAsyncInit = function () {\n\t        FB.init({\n\t            appId: default_config_1.DefaultConfig.facebook.app_id,\n\t            xfbml: true,\n\t            version: 'v2.9'\n\t        });\n\t        FB.AppEvents.logPageView();\n\t    };\n\t    var js, fjs = d.getElementsByTagName(s)[0];\n\t    if (d.getElementById(id)) {\n\t        return;\n\t    }\n\t    js = d.createElement(s);\n\t    js.id = id;\n\t    js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n\t    fjs.parentNode.insertBefore(js, fjs);\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar user_1 = __webpack_require__(5);\n\t//LOAD DACEBOOK CONFIG\n\tvar fb_config_1 = __webpack_require__(3);\n\tfb_config_1.FBConfig();\n\tmodule.exports = {\n\t    User: user_1.User\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar api_config_1 = __webpack_require__(2);\n\tvar User = (function () {\n\t    //Hàm khởi tạo với tham số token là Optional\n\t    function User(token) {\n\t        if (token === void 0) { token = null; }\n\t        this.authenticated = false;\n\t    }\n\t    //Khai báo hàm private \n\t    //Tham số là 1 hàm callback Optional\n\t    User.prototype.requiedAuthenticate = function (callback) {\n\t        if (callback === void 0) { callback = function () { }; }\n\t        if (!this.authenticated) {\n\t            callback('PERMISSION ERROR', \"You don't have permission to access\");\n\t        }\n\t        return this.authenticated;\n\t    };\n\t    //Khai báo hàm cho 1 đối tượng User\n\t    User.prototype.login = function (phone, password, callback) {\n\t        var _this = this;\n\t        if (callback === void 0) { callback = function () { }; }\n\t        //Sử dụng ajax để access API\n\t        $.ajax({\n\t            type: 'POST',\n\t            url: api_config_1.API.pages.getAllPages,\n\t            dataType: 'json',\n\t            data: {\n\t                Phone: phone,\n\t                Password: password\n\t            }\n\t        })\n\t            .done(function (res) {\n\t            //Kết quả trả về\n\t            if (res.StatusCode === 200) {\n\t                _this.user = res.Data;\n\t                _this._token = res.Data.Token;\n\t                _this.authenticated = true;\n\t                //Tạo event trigger\n\t                //Dùng để client biêt khi có event\n\t                //Ví dụ $(this).on(\"EVENT_KEY\",callback);\n\t                $(_this).trigger(\"EVENT_KEY\", _this.authenticated);\n\t                //Sử dụng localStorage cho 1 số biến cần cache lại\n\t                localStorage.setItem(\"STORE_KEY\", res.Data.Token);\n\t                //Gọi callback đẻ trả về kết quả cho client \n\t                callback(null, res.Data);\n\t            }\n\t            else {\n\t                _this.authenticated = false;\n\t                $(_this).trigger(\"EVENT_KEY\", _this.authenticated);\n\t                callback(res.StatusCode, res.StatusMessage);\n\t            }\n\t        })\n\t            .fail(function (request, err, status) {\n\t            //Kết quả trả về lỗi \n\t            _this.authenticated = false;\n\t            $(_this).trigger(\"EVENT_KEY\", _this.authenticated);\n\t            callback(err, status);\n\t        });\n\t    };\n\t    //LOGIN WITH FACEBOOK\n\t    User.prototype.loginWithFacebook = function (callback) {\n\t        if (callback === void 0) { callback = function () { }; }\n\t        var self = this;\n\t        FB.login(function (response) {\n\t            if (response.authResponse) {\n\t                console.log(\"FB Login Success\", response);\n\t            }\n\t            else {\n\t                callback('User cancelled login or did not fully authorize.', null);\n\t            }\n\t        });\n\t    };\n\t    //LOGOUT\n\t    User.prototype.logout = function () {\n\t        //Facebook logout \n\t        FB.logout();\n\t        //Xoá cache \n\t        localStorage.removeItem(\"STORE_KEY\");\n\t        this._token = null;\n\t        this.user = null;\n\t        this.authenticated = false;\n\t    };\n\t    //Khai báo hàm Static \n\t    //Sử dụng:  innoway-chatbot.User.getAllProducts(callback)\n\t    User.getAllProducts = function (callback) {\n\t        callback(null, \"data\");\n\t    };\n\t    //Khai báo biến static\n\t    User.cards = [];\n\t    return User;\n\t}());\n\texports.User = User;\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// innoway_chatbot.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d63648cc1d78b1d5787","export const DefaultConfig = {\n    host: \"https://jerry-chatbot.herokuapp.com/\",\n    facebook: {\n        app_id: \"143366482876596\" //Innoway\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/configs/default.config.ts","\nimport { DefaultConfig } from './default.config';\n\nexport const API = {\n    pages: {\n        getAllPages: DefaultConfig.host+\"api/me/pages\",\n        subscribe: DefaultConfig.host+\"api/me/pages/subscribe\",\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/configs/api.config.ts","import { DefaultConfig } from './default.config';\ndeclare var $:any,window:any,FB:any;\n\n//Facebook Config\n\n\nexport const FBConfig= () => {\n    var d = document;\n    var s = 'script';\n    var id = 'facebook-jssdk';\n    window.fbAsyncInit = function() {\n        FB.init({\n            appId      : DefaultConfig.facebook.app_id,\n            xfbml      : true,\n            version    : 'v2.9'\n        });\n        FB.AppEvents.logPageView();\n    };\n    var js:any, fjs:any = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) {return;}\n    js = d.createElement(s); js.id = id;\n    js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n    fjs.parentNode.insertBefore(js, fjs);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/configs/fb.config.ts","import { User } from './user';\n\n//LOAD DACEBOOK CONFIG\nimport {  FBConfig } from './configs/fb.config';\nFBConfig();\n\ndeclare var module:any;\n\nmodule.exports = {\n    User: User\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/index.ts","//Import Config\nimport { DefaultConfig } from './configs/default.config';\nimport { API } from './configs/api.config';\n\ndeclare var $:any,FB:any,gapi:any,window:any;\n\nexport class User {\n    //Khai báo biến private\n    private _token:string;\n    //Khai báo biến public\n    public user:any;\n    public authenticated: boolean = false;\n    //Khai báo biến static\n    public static cards:any[] = [];\n\n    //Hàm khởi tạo với tham số token là Optional\n    constructor(token:string = null){\n        \n    } \n\n    //Khai báo hàm private \n    //Tham số là 1 hàm callback Optional\n    private requiedAuthenticate(callback:any = ()=>{}){\n        if(!this.authenticated){\n            callback('PERMISSION ERROR',\"You don't have permission to access\");\n        }\n        return this.authenticated\n    }\n    //Khai báo hàm cho 1 đối tượng User\n    public login(phone:string,password:string,callback:any = ()=>{}){\n        //Sử dụng ajax để access API\n        $.ajax({\n            type: 'POST',\n            url: API.pages.getAllPages,\n            dataType:'json',\n            data: { //Dữ liệu json gửi đi\n                Phone   : phone,\n                Password: password\n            }\n        })\n        .done((res:any) => {\n            //Kết quả trả về\n            if(res.StatusCode === 200){\n                this.user = res.Data;\n                this._token = res.Data.Token;\n                this.authenticated = true;\n                //Tạo event trigger\n                //Dùng để client biêt khi có event\n                //Ví dụ $(this).on(\"EVENT_KEY\",callback);\n                $(this).trigger(\"EVENT_KEY\",this.authenticated); \n                //Sử dụng localStorage cho 1 số biến cần cache lại\n                localStorage.setItem(\"STORE_KEY\",res.Data.Token);\n                //Gọi callback đẻ trả về kết quả cho client \n                callback(null,res.Data);\n            }else{\n                this.authenticated = false;\n                $(this).trigger(\"EVENT_KEY\",this.authenticated);\n                callback(res.StatusCode,res.StatusMessage);\n            }\n            \n        })\n        .fail((request:any,err:any,status:any)=>{\n            //Kết quả trả về lỗi \n            this.authenticated = false;\n            $(this).trigger(\"EVENT_KEY\",this.authenticated);\n            callback(err,status);\n        });\n    }\n    //LOGIN WITH FACEBOOK\n    public loginWithFacebook(callback:any = ()=>{}){\n        var self = this;\n        FB.login(function(response:any) {\n            if (response.authResponse) {\n                console.log(\"FB Login Success\", response);\n                // self.getUserWithProvider('facebook',FB.getUserID(),callback);\n            } else {\n                callback('User cancelled login or did not fully authorize.',null);\n            }\n        });\n    }\n\n    //LOGOUT\n    public logout(){\n        //Facebook logout \n        FB.logout();\n        //Xoá cache \n        localStorage.removeItem(\"STORE_KEY\");\n        this._token = null;\n        this.user = null;\n        this.authenticated = false;\n    }\n    \n    //Khai báo hàm Static \n    //Sử dụng:  innoway-chatbot.User.getAllProducts(callback)\n    public static getAllProducts(callback:any){\n        callback(null,\"data\");\n    } \n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/user.ts"],"sourceRoot":""}