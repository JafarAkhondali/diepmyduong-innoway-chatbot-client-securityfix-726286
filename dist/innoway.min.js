!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("innoway",[],e):"object"==typeof exports?exports.innoway=e():t.innoway=e()}(this,function(){return function(t){function e(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(4)},function(t,e){"use strict";e.ServerConfig={host:"http://phincafe.vn",filesPath:"/uploads/",apiPath:"/apis/v1/"},e.APIPath=e.ServerConfig.host+e.ServerConfig.apiPath},function(t,e,o){"use strict";var a=o(1);e.CustomerConfig={authTokenStorage:"innoway.Customer.auth.token",loginUrl:a.APIPath+"CustomerLogin",signUpUrl:a.APIPath+"Register",updateCustomerUrl:a.APIPath+"EditCustomer",getBillsUrl:a.APIPath+"GetListBillFromCustomer",getBillUrl:a.APIPath+"GetBill",getAllProductsUrl:a.APIPath+"GetAllProduct",sendBillUrl:a.APIPath+"SendBill",addFeedbackUrl:a.APIPath+"AddFeedback",getPromotionsUrl:a.APIPath+"Promotions",getCustomerUrl:a.APIPath+"GetCustomer",getBlogsUrl:a.ServerConfig.host+"/blog/wp-json/posts"}},function(t,e){"use strict";e.CustomerEvents={AuthStateChange:"AuthStateChange",CustomerEdited:"CustomerEdited"}},function(t,e,o){"use strict";var a=o(2),n=o(1),u=o(3),i=function(){function t(t){void 0===t&&(t=null),this.authenticated=!1,null==t&&(t=localStorage.getItem(a.CustomerConfig.authTokenStorage)),null!=t&&this.loginWithToken(t)}return t.prototype.requiedAuthenticate=function(t){return void 0===t&&(t=function(){}),this.authenticated||t("PERMISSION ERROR","You don't have permission to access"),this.authenticated},t.prototype.login=function(t,e,o){var n=this;void 0===o&&(o=function(){}),$.ajax({type:"POST",url:a.CustomerConfig.loginUrl,dataType:"json",data:{Phone:t,Password:e}}).done(function(t){200===t.StatusCode?(n.user=t.Data,n._token=t.Data.Token,n.authenticated=!0,$(n).trigger(u.CustomerEvents.AuthStateChange,n.authenticated),localStorage.setItem(a.CustomerConfig.authTokenStorage,t.Data.Token),o(null,t.Data)):(n.authenticated=!1,$(n).trigger(u.CustomerEvents.AuthStateChange,n.authenticated),o(t.StatusCode,t.StatusMessage))}).fail(function(t,e,a){n.authenticated=!1,$(n).trigger(u.CustomerEvents.AuthStateChange,n.authenticated),o(e,a)})},t.prototype.loginWithToken=function(t,e){var o=this;void 0===e&&(e=function(){}),console.log("TOKEN",t),$.ajax({type:"POST",url:a.CustomerConfig.getCustomerUrl,dataType:"json",headers:{token:t}}).done(function(t){console.log(t),200===t.StatusCode?(o.user=t.Data,o._token=t.Data.Token,o.authenticated=!0,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),localStorage.setItem(a.CustomerConfig.authTokenStorage,t.Data.Token),e(null,t.Data)):(o.authenticated=!1,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),e(t.StatusCode,t.StatusMessage))}).fail(function(t,a,n){console.log("FAIL",t),o.authenticated=!1,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),e(a,n)})},t.prototype.loginWithGoolge=function(){},t.prototype.loginWithFacebook=function(){},t.prototype.signUp=function(t,e){var o=this;void 0===e&&(e=function(){}),$.ajax({type:"POST",url:a.CustomerConfig.signUpUrl,dataType:"json",data:t}).done(function(t){200===t.StatusCode?(o.user=t.Data,o._token=t.Data.Token,o.authenticated=!0,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),localStorage.setItem(a.CustomerConfig.authTokenStorage,t.Data.Token),e(null,t.Data)):(o.authenticated=!1,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),e(t.StatusCode,t.StatusMessage))}).fail(function(t,a,n){o.authenticated=!1,$(o).trigger(u.CustomerEvents.AuthStateChange,o.authenticated),e(a,n)})},t.prototype.update=function(t,e,o){var n=this;void 0===o&&(o=function(){}),$.ajax({type:"POST",url:a.CustomerConfig.updateCustomerUrl,dataType:"json",data:e,headers:{token:t}}).done(function(t){200===t.StatusCode?($(n).trigger(u.CustomerEvents.CustomerEdited,t.Data),n.user=t.Data,o(null,t.Data)):o(t.StatusCode,t.StatusMessage)}).fail(function(t,e,a){o(e,a)})},t.prototype.getBills=function(t){void 0===t&&(t=function(){}),this.requiedAuthenticate(t)&&$.ajax({type:"POST",url:a.CustomerConfig.getBillsUrl,dataType:"json",headers:{token:this._token}}).done(function(e){200===e.StatusCode?t(null,e.Data):t(e.StatusCode,e.StatusMessage)}).fail(function(e,o,a){t(o,a)})},t.getAllProducts=function(t){$.ajax({type:"GET",url:a.CustomerConfig.getAllProductsUrl,dataType:"json",crossDomain:!0}).done(function(e){200===e.StatusCode?(e.Data.forEach(function(t){t.Thumbnail=n.ServerConfig.host+n.ServerConfig.filesPath+t.Thumbnail}),t(null,e.Data)):t(e.StatusCode,e.StatusMessage)}).fail(function(e,o,a){t(o,a)})},t.events=u.CustomerEvents,t}();e.Customer=i}])});
//# sourceMappingURL=innoway.min.js.map